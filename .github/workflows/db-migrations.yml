name: Database Migrations

on:
  push:
    paths:
      - 'prisma/schema.prisma'
      - 'prisma/migrations/**'

jobs:
  validate:
    name: ğŸ—ƒï¸ Validate Migrations
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“Š Check Migration Status
        run: npx prisma migrate status
        
      - name: ğŸ§ª Test Migrations
        run: |
          npx prisma migrate reset --force
          npx prisma migrate deploy 